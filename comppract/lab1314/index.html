<!doctype html><html lang=ru><head><link rel="shortcut icon" href=https://danilaisaichev.github.io/images/logo.png type=image/png><link href=https://danilaisaichev.github.io/css/style.css type=text/css rel=stylesheet><meta name=viewport content="width=device-width,initial-scale=1"></head><body><script type=text/javascript src=https://danilaisaichev.github.io/js/fonts.js></script>
<wrapper><header><nav><a href=https://danilaisaichev.github.io/ class=button>Главная</a>
<a href=https://danilaisaichev.github.io/prog class=button>Программирование</a>
<a href=https://danilaisaichev.github.io/comppract class=button>Компьютерный практикум</a>
<a href=https://danilaisaichev.github.io/web class=button>Веб-проектирование</a>
<a href=https://danilaisaichev.github.io/serv_web_tech class=button>Серверные веб-технологии</a>
<a href=https://danilaisaichev.github.io/pit class=button>ПИТ</a></nav></header><main>lab1314<h1 id=отчёт-по-лабораторным-работам-13-и-14>Отчёт по лабораторным работам 13 и 14</h1><h2 id=цель>Цель:</h2><ol><li><p>Создать журнал сообщений.</p></li><li><p>Создать модифицированную версию журнала сообщений с формой на Bootstrap.</p></li><li><p>Создать приложение «Книга отзывов» с использованием БД MySQL.</p></li></ol><h2 id=1-создание-журнала-сообщений>1. Создание журнала сообщений.</h2><h3 id=код-отвечающий-за-запись-данных-в-файл-фрагмент-indexphp>Код, отвечающий за запись данных в файл (фрагмент index.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>if</span> ($_SERVER[<span style=color:#e6db74>&#39;REQUEST_METHOD&#39;</span>]<span style=color:#f92672>===</span><span style=color:#e6db74>&#39;POST&#39;</span>) {
</span></span><span style=display:flex><span>    $r <span style=color:#f92672>=</span> <span style=color:#a6e22e>htmlentities</span>($_POST[<span style=color:#e6db74>&#39;message&#39;</span>]) <span style=color:#f92672>??</span> <span style=color:#e6db74>&#39;Пустое сообщение&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $f <span style=color:#f92672>=</span> <span style=color:#a6e22e>fopen</span>(<span style=color:#e6db74>&#39;log.txt&#39;</span>, <span style=color:#e6db74>&#39;a&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fwrite</span>($f, $r);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fwrite</span>($f, <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fclose</span>($f);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $f <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&lt;style&gt;.right {width: 60%; margin-left: 35%; zoom: 80%}&lt;/style&gt;&#39;</span>;
</span></span><span style=display:flex><span>    $f <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#39;&lt;div class=&#34;right&gt;&lt;h2&gt;Добавить ещё один отзыв&lt;/h2&gt;&lt;/div&gt;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;&lt;h3 style=&#34;color:green&#34;&gt;Данные успешно добавлены&lt;/h3&gt;&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><h3 id=код-формы-собирающей-данные-фрагмент-indexphp>Код формы, собирающей данные (фрагмент index.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>label</span>&gt;Сообщение&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;message&#34;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;message&#34;</span> <span style=color:#a6e22e>required</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;required&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;submit&#34;</span>&gt;Отправить сообщение&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><h3 id=код-отвечающий-за-вывод-результата-работы-кода-из-listphp-фрагмент-indexphp>Код, отвечающий за вывод результата работы кода из list.php (фрагмент index.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;/form&gt;&lt;/div&gt;&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;h2&gt;Список отзывов&lt;/h2&gt;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span></code></pre></div><h3 id=главная-страница-indexphp>Главная страница (index.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Работа</span> <span style=color:#a6e22e>с</span> <span style=color:#a6e22e>логом</span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  $f <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&lt;h2&gt;Форма для заполнения&lt;/h2&gt;&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> ($_SERVER[<span style=color:#e6db74>&#39;REQUEST_METHOD&#39;</span>]<span style=color:#f92672>===</span><span style=color:#e6db74>&#39;POST&#39;</span>) {
</span></span><span style=display:flex><span>    $r <span style=color:#f92672>=</span> <span style=color:#a6e22e>htmlentities</span>($_POST[<span style=color:#e6db74>&#39;message&#39;</span>]) <span style=color:#f92672>??</span> <span style=color:#e6db74>&#39;Пустое сообщение&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $f <span style=color:#f92672>=</span> <span style=color:#a6e22e>fopen</span>(<span style=color:#e6db74>&#39;log.txt&#39;</span>, <span style=color:#e6db74>&#39;a&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fwrite</span>($f, $r);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fwrite</span>($f, <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fclose</span>($f);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $f <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&lt;style&gt;.right {width: 60%; margin-left: 35%; zoom: 80%}&lt;/style&gt;&#39;</span>;
</span></span><span style=display:flex><span>    $f <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#39;&lt;div class=&#34;right&gt;&lt;h2&gt;Добавить ещё один отзыв&lt;/h2&gt;&lt;/div&gt;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;&lt;h3 style=&#34;color:green&#34;&gt;Данные успешно добавлены&lt;/h3&gt;&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> $f;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;div class=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>right</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&gt;&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;form method=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>post</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&gt;&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&lt;&lt;&lt;</span><span style=color:#e6db74>_END</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &lt;div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;label&gt;Сообщение&lt;/label&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;input id=&#34;message&#34; name=&#34;message&#34; required=&#34;required&#34; type=&#34;text&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;button type=&#34;submit&#34;&gt;Отправить сообщение&lt;/button&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span><span style=color:#e6db74>_END</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;/form&gt;&lt;/div&gt;&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;h2&gt;Список отзывов&lt;/h2&gt;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#66d9ef>require_once</span>(<span style=color:#e6db74>&#39;list.php&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=код-отвечающий-за-считывание-данных-из-logtxt-listphp>Код, отвечающий за считывание данных из log.txt (list.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  $f <span style=color:#f92672>=</span> <span style=color:#a6e22e>fopen</span>(<span style=color:#e6db74>&#39;log.txt&#39;</span>, <span style=color:#e6db74>&#39;r&#39;</span>);
</span></span><span style=display:flex><span>  $list <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>  $list <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#39;&lt;ul&gt;&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>wrap</span>($x){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&lt;li&gt;&#39;</span><span style=color:#f92672>.</span>$x<span style=color:#f92672>.</span><span style=color:#e6db74>&#39;&lt;/li&gt;&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> (($line <span style=color:#f92672>=</span> <span style=color:#a6e22e>fgets</span>($f)) <span style=color:#f92672>!==</span> <span style=color:#66d9ef>false</span>) {
</span></span><span style=display:flex><span>    $list <span style=color:#f92672>.=</span> <span style=color:#a6e22e>wrap</span>($line);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fclose</span>($f);
</span></span><span style=display:flex><span>  $list <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#39;&lt;/ul&gt;&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> $list;
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=результаты-выполнения-работы>Результаты выполнения работы:</h3><p><img src=./lab13-14-screenshots/13.1%20result%201.png alt="13.1 result 1"></p><p><img src=./lab13-14-screenshots/13.1%20result%202.png alt="13.2 result 2"></p><h2 id=2-создание-модифицированной-версии-журнала-сообщений-с-формой-на-bootstrap>2. Создание модифицированной версии журнала сообщений с формой на Bootstrap.</h2><h3 id=главная-страница-indexphp-1>Главная страница (index.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>html</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>head</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>title</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Работа</span> <span style=color:#a6e22e>с</span> <span style=color:#a6e22e>логом</span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>title</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>link</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css&#34;</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span> <span style=color:#a6e22e>integrity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x&#34;</span> <span style=color:#a6e22e>crossorigin</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;anonymous&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://code.jquery.com/jquery-3.6.0.min.js&#34;</span><span style=color:#f92672>&gt;&lt;/</span><span style=color:#a6e22e>script</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;functions.js&#34;</span><span style=color:#f92672>&gt;&lt;/</span><span style=color:#a6e22e>script</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>head</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>body</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;container-fluid&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Работа</span> <span style=color:#a6e22e>с</span> <span style=color:#a6e22e>логом</span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;&lt;/</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>h3</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Форма</span> <span style=color:#a6e22e>для</span> <span style=color:#a6e22e>заполнения</span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>h3</span><span style=color:#f92672>&gt;&lt;/</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>form</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;msg-form&#34;</span> <span style=color:#a6e22e>method</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mb-3&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>label</span> <span style=color:#66d9ef>for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;message&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;form-label&#34;</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Сообщение</span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>label</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;message&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;form-control&#34;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;message&#34;</span> <span style=color:#a6e22e>required</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;submit&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn btn-primary&#34;</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Отправить</span> <span style=color:#a6e22e>сообщение</span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>button</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>form</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h3</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Сообщения</span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>h3</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;messages&#34;</span><span style=color:#f92672>&gt;&lt;/</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>body</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>html</span><span style=color:#f92672>&gt;</span>
</span></span></code></pre></div><h3 id=файл-с-функциями-отображения-и-добавления-сообщений-finctionsjs>Файл с функциями отображения и добавления сообщений (finctions.js):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$</span>(document).<span style=color:#a6e22e>ready</span>(<span style=color:#66d9ef>function</span>(){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>$</span>.<span style=color:#a6e22e>ajax</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/functions.php?action=list&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;GET&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>success</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;#messages&#39;</span>).<span style=color:#a6e22e>append</span>(<span style=color:#e6db74>&#39;&lt;ul&gt;&lt;/ul&gt;&#39;</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>msg</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;#messages ul&#39;</span>).<span style=color:#a6e22e>append</span>(<span style=color:#e6db74>`&lt;li&gt;</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>msg</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&lt;/li&gt;`</span>);
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;#msg-form&#39;</span>).<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;submit&#39;</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>preventDefault</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>$</span>.<span style=color:#a6e22e>ajax</span>({
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/functions.php?action=add&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>serialize</span>(),
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>success</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;success&#39;</span>) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>msg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;#message&#39;</span>).<span style=color:#a6e22e>val</span>();
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>msg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>`&lt;li&gt;</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>msg</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&lt;/li&gt;`</span>);
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;#messages ul&#39;</span>).<span style=color:#a6e22e>append</span>(<span style=color:#a6e22e>msg</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h3 id=файл-с-функциями-добавления-и-прочтения-сообщений-functionsphp>Файл с функциями добавления и прочтения сообщений (functions.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Content-Type: application/json&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>add_message</span>() {
</span></span><span style=display:flex><span>        $msg <span style=color:#f92672>=</span> <span style=color:#a6e22e>htmlentities</span>($_POST[<span style=color:#e6db74>&#39;message&#39;</span>]);
</span></span><span style=display:flex><span>        $msg <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#66d9ef>empty</span>($msg) <span style=color:#f92672>?</span> $msg <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Пустое сообщение&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $f <span style=color:#f92672>=</span> <span style=color:#a6e22e>fopen</span>(<span style=color:#e6db74>&#39;log.txt&#39;</span>, <span style=color:#e6db74>&#39;a&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fwrite</span>($f, $msg);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fwrite</span>($f, <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fclose</span>($f);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>json_encode</span>(<span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;status&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;success&#39;</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>list_messages</span>() {
</span></span><span style=display:flex><span>        $f <span style=color:#f92672>=</span> <span style=color:#a6e22e>fopen</span>(<span style=color:#e6db74>&#39;log.txt&#39;</span>, <span style=color:#e6db74>&#39;r&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>$f) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;Ошибка чтения файла.&#39;</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        $messages <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (($line <span style=color:#f92672>=</span> <span style=color:#a6e22e>fgets</span>($f)) <span style=color:#f92672>!=</span> <span style=color:#66d9ef>false</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>array_push</span>($messages, $line);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>json_encode</span>($messages);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fclose</span>($f);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> ($_GET[<span style=color:#e6db74>&#39;action&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;add&#39;</span>) <span style=color:#a6e22e>add_message</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> ($_GET[<span style=color:#e6db74>&#39;action&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;list&#39;</span>) <span style=color:#a6e22e>list_messages</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=результаты-выполнения-работы-1>Результаты выполнения работы:</h3><p><img src=./lab13-14-screenshots/13.2%20result%201.png alt="13.2 result 1"></p><p><img src=./lab13-14-screenshots/13.2%20result%202.png alt="13.2 result 2"></p><h2 id=3-создание-приложения-книга-отзывов-с-использованием-бд-mysql>3. Создание приложения «Книга отзывов» с использованием БД MySQL.</h2><h3 id=код-приложения-indexphp>Код приложения (index.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Работа</span> <span style=color:#a6e22e>с</span> <span style=color:#a6e22e>логом</span><span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>  $f <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&lt;h2&gt;Форма для заполнения&lt;/h2&gt;&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> ($_SERVER[<span style=color:#e6db74>&#39;REQUEST_METHOD&#39;</span>]<span style=color:#f92672>===</span><span style=color:#e6db74>&#39;POST&#39;</span>) {
</span></span><span style=display:flex><span>    $r <span style=color:#f92672>=</span> <span style=color:#a6e22e>htmlentities</span>($_POST[<span style=color:#e6db74>&#39;message&#39;</span>]) <span style=color:#f92672>??</span> <span style=color:#e6db74>&#39;Пустое сообщение&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $f <span style=color:#f92672>=</span> <span style=color:#a6e22e>fopen</span>(<span style=color:#e6db74>&#39;log.txt&#39;</span>, <span style=color:#e6db74>&#39;a&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fwrite</span>($f, $r);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fwrite</span>($f, <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fclose</span>($f);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $f <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&lt;style&gt;.right {width: 60%; margin-left: 35%; zoom: 80%}&lt;/style&gt;&#39;</span>;
</span></span><span style=display:flex><span>    $f <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#39;&lt;div class=&#34;right&gt;&lt;h2&gt;Добавить ещё один отзыв&lt;/h2&gt;&lt;/div&gt;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;&lt;h3 style=&#34;color:green&#34;&gt;Данные успешно добавлены&lt;/h3&gt;&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> $f;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;div class=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>right</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&gt;&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;form method=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>post</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&gt;&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&lt;&lt;&lt;</span><span style=color:#e6db74>_END</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &lt;div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;label&gt;Сообщение&lt;/label&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;input id=&#34;message&#34; name=&#34;message&#34; required=&#34;required&#34; type=&#34;text&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;button type=&#34;submit&#34;&gt;Отправить сообщение&lt;/button&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span><span style=color:#e6db74>_END</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;/form&gt;&lt;/div&gt;&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;h2&gt;Список отзывов&lt;/h2&gt;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>echo</span> <span style=color:#66d9ef>require_once</span>(<span style=color:#e6db74>&#39;list.php&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=код-отвечающий-за-подключение-к-базе-данных-bdphp>Код, отвечающий за подключение к базе данных (bd.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>    $dbloc <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span>    $dbuser <span style=color:#f92672>=</span> $dbname <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;user1&#39;</span>;
</span></span><span style=display:flex><span>    $dbpass <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Qwerty123&#39;</span>;
</span></span><span style=display:flex><span>    $dsn <span style=color:#f92672>=</span> $dsn <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;mysql:host=</span><span style=color:#e6db74>{</span>$dbloc<span style=color:#e6db74>}</span><span style=color:#e6db74>;dbname=</span><span style=color:#e6db74>{</span>$dbname<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PDO</span>($dsn, $dbuser, $dbpass);
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=код-формы-собирающей-данные-formphp>Код формы, собирающей данные (form.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> <span style=color:#e6db74>&lt;&lt;&lt;</span><span style=color:#e6db74>_END</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;div class=&#34;field&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;label class=&#34;label&#34;&gt;Имя&lt;/label&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;div class=&#34;control&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;input class=&#34;input&#34; id=&#34;name&#34; name=&#34;name&#34; required=&#34;required&#34; type=&#34;text&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;div class=&#34;field&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;label class=&#34;label&#34;&gt;Email&lt;/label&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;div class=&#34;control&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;input class=&#34;input&#34; id=&#34;email&#34; name=&#34;email&#34; required=&#34;required&#34; type=&#34;email&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;div class=&#34;field&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;label class=&#34;label&#34;&gt;Отзыв&lt;/label&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;div class=&#34;control&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;textarea class=&#34;textarea&#34; id=&#34;text&#34; name=&#34;text&#34; required=&#34;required&#34;&gt;&lt;/textarea&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;div class=&#34;field&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;div class=&#34;control&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;label class=&#34;checkbox&#34;&gt;&lt;input required=&#34;required&#34; type=&#34;checkbox&#34;&gt;Согласен с условиями&lt;/label&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;div class=&#34;field&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;div class=&#34;control has-text-centered&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;button class=&#34;button is-warning has-text-weight-bold&#34; type=&#34;submit&#34;&gt;Отправить отзыв&lt;/button&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span><span style=color:#e6db74>_END</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=код-отвечающий-за-вывод-данных-в-виде-таблицы-tablephp>Код, отвечающий за вывод данных в виде таблицы (table.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>    $sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT `name`, `email`, `text` FROM `reviews` ORDER BY `id` DESC&#34;</span>;
</span></span><span style=display:flex><span>    $result  <span style=color:#f92672>=</span> $conn <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>query</span>($sql);
</span></span><span style=display:flex><span>    $list <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>    $list <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#39;&lt;table&gt;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> ($row <span style=color:#f92672>=</span> $result<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>PDO</span><span style=color:#f92672>::</span><span style=color:#a6e22e>FETCH_NUM</span>)) {
</span></span><span style=display:flex><span>        $list <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#39;&lt;tr&gt;&#39;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>implode</span>(<span style=color:#e6db74>&#39;&#39;</span>,<span style=color:#a6e22e>array_map</span>(<span style=color:#66d9ef>function</span>($x){ <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&lt;td&gt;&#39;</span><span style=color:#f92672>.</span>$x<span style=color:#f92672>.</span><span style=color:#e6db74>&#39;&lt;/td&gt;&#39;</span>;},$row))<span style=color:#f92672>.</span><span style=color:#e6db74>&#39;&lt;/tr&gt;&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    $list <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#39;/&lt;table&gt;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> $list;
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=код-отвечающий-за-извлечение-данных-getphp>Код, отвечающий за извлечение данных (get.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>error_reporting</span>(<span style=color:#66d9ef>E_ALL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ini_set</span>(<span style=color:#e6db74>&#39;display_errors&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Content-type: text/html; charset=utf-8&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;h1&gt;Извлечение данных&lt;/h1&gt;&#34;</span>;
</span></span><span style=display:flex><span>    $conn <span style=color:#f92672>=</span> <span style=color:#66d9ef>require_once</span> (<span style=color:#e6db74>&#39;bd.php&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $q <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;MAX(`id`)&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT </span><span style=color:#e6db74>{</span>$q<span style=color:#e6db74>}</span><span style=color:#e6db74> FROM `reviews`;&#34;</span>;
</span></span><span style=display:flex><span>    $result <span style=color:#f92672>=</span> $conn <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>query</span>($sql) <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>PDO</span><span style=color:#f92672>::</span><span style=color:#a6e22e>FETCH_OBJ</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $id <span style=color:#f92672>=</span> $_GET[<span style=color:#e6db74>&#39;id&#39;</span>] <span style=color:#f92672>??</span> $result <span style=color:#f92672>-&gt;</span> $q;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT `text` FROM `reviews` WHERE `id`=&#39;</span><span style=color:#e6db74>{</span>$id<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;&#34;</span>;
</span></span><span style=display:flex><span>    $result <span style=color:#f92672>=</span> $conn <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>query</span>($sql) <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>PDO</span><span style=color:#f92672>::</span><span style=color:#a6e22e>FETCH_OBJ</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> ($result<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>text</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=код-отвечающий-за-обновление-данных-updatephp>Код, отвечающий за обновление данных (update.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>error_reporting</span>(<span style=color:#66d9ef>E_ALL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ini_set</span>(<span style=color:#e6db74>&#39;display_errors&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Content-type: text/html; charset=utf-8&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;h1&gt;Обновление данных&lt;/h1&gt;&#34;</span>;
</span></span><span style=display:flex><span>    $conn <span style=color:#f92672>=</span> <span style=color:#66d9ef>require_once</span> (<span style=color:#e6db74>&#39;bd.php&#39;</span>);
</span></span><span style=display:flex><span>    $id <span style=color:#f92672>=</span> $_GET[<span style=color:#e6db74>&#39;id&#39;</span>];
</span></span><span style=display:flex><span>    $name <span style=color:#f92672>=</span> $_GET[<span style=color:#e6db74>&#39;name&#39;</span>];
</span></span><span style=display:flex><span>    $email <span style=color:#f92672>=</span> $_GET[<span style=color:#e6db74>&#39;email&#39;</span>];
</span></span><span style=display:flex><span>    $text <span style=color:#f92672>=</span> $_GET[<span style=color:#e6db74>&#39;text&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT MAX(id) AS `maxid` FROM `reviews`&#34;</span>;
</span></span><span style=display:flex><span>    $maxix <span style=color:#f92672>=</span> $conn <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>query</span>($sql) <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>PDO</span><span style=color:#f92672>::</span><span style=color:#a6e22e>FETCH_OBJ</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>maxid</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> ($id <span style=color:#f92672>&lt;</span> $maxix)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;UPDATE `reviews` SET `name`=&#39;</span><span style=color:#e6db74>{</span>$name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;, `email`=&#39;</span><span style=color:#e6db74>{</span>$email<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;, `text`=&#39;</span><span style=color:#e6db74>{</span>$text<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; WHERE `id`=&#39;</span><span style=color:#e6db74>{</span>$id<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;;&#34;</span>;
</span></span><span style=display:flex><span>        $conn <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>query</span>($sql);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> (<span style=color:#e6db74>&#34;Обновлено&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> (<span style=color:#e6db74>&#34;Не обновлено&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=код-отвечающий-за-удаление-данных-deletephp>Код, отвечающий за удаление данных (delete.php):</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>error_reporting</span>(<span style=color:#66d9ef>E_ALL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ini_set</span>(<span style=color:#e6db74>&#39;display_errors&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Content-type: text/html; charset=utf-8&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;h1&gt;Удаление данных&lt;/h1&gt;&#34;</span>;
</span></span><span style=display:flex><span>    $conn <span style=color:#f92672>=</span> <span style=color:#66d9ef>require_once</span> (<span style=color:#e6db74>&#39;bd.php&#39;</span>);
</span></span><span style=display:flex><span>    $id <span style=color:#f92672>=</span> $_GET[<span style=color:#e6db74>&#39;id&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT MAX(id) AS `maxid` FROM `reviews`&#34;</span>;
</span></span><span style=display:flex><span>    $maxix <span style=color:#f92672>=</span> $conn <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>query</span>($sql) <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>PDO</span><span style=color:#f92672>::</span><span style=color:#a6e22e>FETCH_OBJ</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>maxid</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> ($id <span style=color:#f92672>&lt;</span> $maxix)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;DELETE FROM `reviews` WHERE `id`=&#39;</span><span style=color:#e6db74>{</span>$id<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;&#34;</span>;
</span></span><span style=display:flex><span>        $conn <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>query</span>($sql);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> (<span style=color:#e6db74>&#34;Удалено&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> (<span style=color:#e6db74>&#34;Не удалено&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=результаты-выполнения-работы-2>Результаты выполнения работы:</h3><p><img src=./lab13-14-screenshots/14%20result%201.png alt="14 result 1"></p><p><img src=./lab13-14-screenshots/14%20result%202.png alt="14 result 2"></p><h2 id=вывод>Вывод:</h2><p>В ходе выполнения лабораторной работы были получены навыки работы с языком программирования php, ajax и СУБД MySQL.</p><p>Были созданы две версии журнала сообщений: простая и модифицированная, с bootstrap-формой.</p><p>Было создано приложение «Книга отзывов» с использованием БД MySQL.</p><h2 id=ссылки-на-репозитории>Ссылки на репозитории:</h2><div class=flex-column><a href=https://github.com/DanilaIsaichev/CPLab13 class=button target=_blank>Репозиторий с результатами выполнения работы 13</a>
    <a href=https://github.com/DanilaIsaichev/CPLab14 class=button target=_blank>Репозиторий с результатами выполнения работы 14</a></div></main></body></html>