---
title: "serv_web_tech"
weight: 4

task_code: "serv_web_tech"
task_title: "Серверные веб-техологии"
subject: "Веб проектирование"
---

{{<buttons_column>}}
    {{<button text="Ссылка на папку в репозиторие" link="https://github.com/DanilaIsaichev/DanilaIsaichev.github.io/tree/gh-pages/web/swt">}}
{{</buttons_column>}}

## Лабораторные работы

### Тема 1. Протоколы веба и серверные веб-технологии на платформе Node.js

#### Моделирование взаимодействия «клиент-сервер» с помощью программы telnet и программы curl

Подготовка данных для отправки запроса:

Данила: %D0%94%D0%B0%D0%BD%D0%B8%D0%BB%D0%B0

Исайчев: %D0%98%D1%81%D0%B0%D0%B9%D1%87%D0%B5%D0%B2

#### Отправка запроса с помощью telnet

GET запрос  
![GET запрос](/web/swt/lab/t1/images/telnet/GET1.png)  
Ответ на GET запрос  
![Ответ на GET запрос](/web/swt/lab/t1/images/telnet/GET2.png)  
POST запрос  
![POST запрос](/web/swt/lab/t1/images/telnet/POST1.png)  
Ответ на POST запрос  
![Ответ на POST запрос](/web/swt/lab/t1/images/telnet/POST2.png)  
#### Отправка запроса с помощью cURL  

GET запрос  
![GET запрос](/web/swt/lab/t1/images/curl/GET1.png)  
Ответ на GET запрос  
![Ответ на GET запрос](/web/swt/lab/t1/images/curl/GET2.png)  
POST запрос  
![POST запрос](/web/swt/lab/t1/images/curl/POST1.png)  
Ответ на POST запрос  
![Ответ на POST запрос](/web/swt/lab/t1/images/curl/POST2.png)  
#### Создание простого веб-сервера на основе Node.js
Пример ответа сервера:
```
{
  "date": "16.06.2021 18:07:23"
}
```

### Тема 2. Использование серверных веб-технологий на платформе PHP

#### Развёртывание стека LAMP

Часть I. Развёртывание PHP/FPM + NGINX  
![Развёртывание PHP/FPM](/web/swt/lab/t2/images/task-1-2.png)  
![Развёртывание NGINX](/web/swt/lab/t2/images/task-1-3.png)  
Часть II  
![Развёртывание PHP/FPM + NGINX](/web/swt/lab/t2/images/task-1-4.png)  
#### Разработка на PHP с помощью GD2 графического интерфейса визуализации данных, полученных с помощью сетевого интерфейса  
![Разработка на PHP с помощью GD2 графического интерфейса визуализации данных, полученных с помощью сетевого интерфейса](/web/swt/lab/t2/images/task-2.png)
---

## Инвариантные самостоятельные работы

### Тема 1. Проектирование CRUD для серверного веб-приложения
Реализован REST API для выполнения операций CRUD в базе данных MongoDB.

Приложение реализовано с использованием Express, bodyParser, Mongoose.

Реализованы следующие операции:

`GET /products` - получение списка продуктов

`POST /products/new` - добавление нового продукта

`POST /products/update/:id` - обновление информации о продукте по ID

`POST /products/delete/:id` - удаление информации о продукте по ID

При отправке запросов для добавления и обновления продукта информация о нём передаётся в теле POST-запроса.

Сервер возвращает ответ - статус выполнения операции в формате JSON. Пример ответа сервера (добавление данных):
```
{
  "status": "success"
}
```
Пример ответа сервера на GET-запрос:
```
[
  {
    "amount": {
      "number": 32,
      "unit": "kg"
    },
    "_id": "60e4268f46a5bd73485414f0",
    "name": "Apples",
    "type": "Fruits"
  },
  {
    "amount": {
      "number": 16.25,
      "unit": "kg"
    },
    "_id": "60e42ad546a5bd73485414f1",
    "name": "Bananas",
    "type": "Fruits"
  },
  {
    "amount": {
      "number": 24.5,
      "unit": "kg"
    },
    "_id": "60e42b1046a5bd73485414f2",
    "name": "Strawberries",
    "type": "Berries"
  }
]
```

### Тема 2. Проектирование приложения на основе фреймворка Symphony
Приложение реализует API для выполнения арифметических операций.

Маршруты описаны в файле `routes.yaml`.

Контроллер реализован в файле `CalcController.php`.

Ответ сервера при выполнении запроса по маршруту `/calc/add/2/3`:
```
{
  "result": 5
}
```
Ответ сервера при выполнении запроса по маршруту `/calc/substract/5/7`:
```
{
  "result": -2
}
```
Ответ сервера при выполнении запроса по маршруту `/calc/multiply/7/5`:
```
{
  "result": 35
}
```
Ответ сервера при выполнении запроса по маршруту `/calc/divide/5/7`:
```
{
  "result": 0.7142857142857143
}
```

#### Тема 3. Разработка базы данных на MongoDB

Для разработки базы данных на MongoDB можно использовать MongoDB Cloud.

Этапы разработки базы данных:

* создание базы данных;
* создание коллекций;
* добавление данных.
MongoDB не требует определения схемы документа, что позволяет вносить изменения в структуру документа при добавлении или редактировании данных.

Этапы создания базы данных в MongoDB Cloud:

* создание организации (organization);
* создание проекта (project);
* создание кластера (cluster) и базы данных с помощью MongoDB Atlas;
* добавление данных с помощью MongoDB Atlas, MongoDB Compass или веб-приложения.  
![ИСР тема 3 задание 3](/web/swt/isr/t3/task-3.png)

### Тема 4. Подготовка виртуального сервера или деплой-платформы для публикации веб-ресурса на основе Ghost.js
Ghost.js можно установить с помощью Docker-контейнера.

Для установки контейнера необходимо выполнить команду:
```
docker pull ghost
```
Для запуска Ghost необходимо выполнить команду:
```
docker run -d --name some-ghost -e url=http://localhost:3001 -p 3001:2368 ghost
```
После этого Ghost будет доступен по адресу `server_ip:3001`.  
![ИСР тема 4 задание 1](/web/swt/isr/t4/task-4-1.png)  
![ИСР тема 4 задание 2](/web/swt/isr/t4/task-4-2.png)  
---

## Вариативные самостоятельные работы

### Тема 1. Подготовка сообщения и мастер-класса по сравнению Rest API и RPC
#### REST API
REST (Representational State Transfer - передача состояния представления) — архитектурный стиль взаимодействия компонентов распределённого приложения в сети.

Ограничения для построения REST-приложений по Филдингу:

1. Модель клиент-сервер
2. Отсутствие состояния
3. Кэширование
4. Единообразие интерфейса
5. Слои
6. Код по требованию

Преимущества REST-приложений:

* Надёжностть
* Производительность
* Масштабируемость
* Прозрачность системы взаимодействия
* Простота интерфейсов
* Портативность компонентов
* Лёгкость внесения изменений
* Способностью эволюционировать, приспосабливаясь к новым требованиям

#### PRC
PRC (Remote Procedure Call - удалённый вызов процедур) — класс технологий, позволяющих программам вызывать функции или процедуры в другом адресном пространстве (на удалённых узлах, либо в независимой сторонней системе на том же узле).

Идея вызова удалённых процедур состоит в расширении механизма передачи управления и данных внутри программы, выполняющейся на одном узле, на передачу управления и данных через сеть. Средства удалённого вызова процедур предназначены для облегчения организации распределённых вычислений и создания распределенных клиент-серверных информационных систем.

Характерными чертами вызова удалённых процедур являются:

*асимметричность, то есть одна из взаимодействующих сторон является инициатором;
*синхронность, то есть выполнение вызывающей процедуры приостанавливается с момента выдачи запроса и возобновляется только после возврата из вызываемой процедуры.

С точки зрения разработки веб-решений можно сравнить REST и RPC следующим образом:

#### Передача данных запроса

**REST:** в URL, в GET-параметрах, в HTTP-заголовках, в теле запроса

**RPC:** в теле запроса

#### Передача данных ответа

**REST:** в HTTP-коде ответа, в HTTP-заголовках, в теле ответа

**RPC:** в теле ответа


### Тема 2. Подготовка выступления и мастер-класса по эволюции стандартов PSR
PSR (PHP Standarts Recommendations) - это набор рекомендаций для PHP-разработчиков.

* PSR-0 – Стандарт автозагрузки
* PSR-1 – Базовый стандарт оформления кода
* PSR-2 – Рекомендации по оформлению кода
* PSR-3 – Интерфейс протоколирования
* PSR-4 – Улучшенная автозагрузка

PSR-0: Autoloading Standard описывает обязательные требования, которых необходимо придерживаться для взаимодействия с автозагрузчиком. Стандарт устарел и заменён PSR-4.

PSR-4: Autoloading Standard описывает спецификацию автозагрузки классов из файлов. Он полностью совместим и может использоваться в дополнение к любому другому стандарту автозагрузки, включая PSR-0. Стандарт также описывает, где разместить файлы, которые будут автоматически загружены в соответствии со спецификацией. Данный стандарт используется по умолчанию в Composer.

PSR-3: Logger Interface описывает общий интерфейс для библиотек логирования.

Стандарты стиля кодирования:

* PSR-1: Basic Coding Standard
* PSR-12: Extended Coding Style

PSR-1 включает в себя то, что следует рассматривать как стандартные элементы кодирования, необходимые для обеспечения высокого уровня технической совместимости кода на языке PHP.

PSR-12 расширяет, расширяет и заменяет PSR-2 и требует соблюдения PSR-1, основного стандарта кодирования.

PSR-5: PHPDoc Standard даёт полное и формальное определение стандарта PHPDoc.


### Тема 3. Подготовка презентации и мастер-класса по сравнению характеристик MongoDB и Cassandra
**MongoDB** — документоориентированная система управления базами данных, не требующая описания схемы таблиц. Считается одним из классических примеров NoSQL-систем, использует JSON-подобные документы и схему базы данных.
**Apache Cassandra** — распределённая система управления базами данных, относящаяся к классу NoSQL-систем и рассчитанная на создание высокомасштабируемых и надёжных хранилищ огромных массивов данных, представленных в виде хэша.

#### MongoDB
Имеется поддержка индексов. Система может работать с набором реплик, то есть содержать две или более копии данных на различных узлах. Система масштабируется горизонтально, используя технику сегментирования объектов баз данных — распределение их частей по различным узлам кластера. Она может быть использована в качестве файлового хранилища с балансировкой нагрузки и репликацией данных. Может работать в соответствии с парадигмой MapReduce. Поддерживается JavaScript в запросах, функциях агрегации. Поддерживаются коллекции с фиксированным размером. Имеется поддержка транзакций, удовлетворяющих требованиям ACID.

#### Apache Cassandra
Cassandra реализует распределённую хэш-систему, что обеспечивает практически линейную масштабируемость при увеличении объёма данных. Использует модель хранения данных на базе семейства столбцов. Относится к категории отказоустойчивых СУБД: помещённые в базу данные автоматически реплицируются на несколько узлов распредёленной сети или даже равномерно распределяются в нескольких дата-центрах.

#### Создание таблицы (коллекции)
MongoDB организует данные в базы данных (Database), где есть коллекции (Collections), в которых лежат документы (Documents). Команда use database создает экземпляр базы данных при первом вызове и изменяет контекст для вновь созданной базы данных. Коллекции создаются автоматически при добавлении первого документа в новую коллекцию.

Создание таблицы с Cassandra похоже на SQL. Одним из основных различий является отсутствие ограничений целостности (например, NOT NULL), но это входит в зону ответственности приложения, а не NoSQL базы данных.

#### Добавление данных
В целом выражение INSERT в Cassandra выглядит очень похоже на аналогичное в SQL.

Несмотря на то, что MongoDB является NoSQL базой данных, подобно Cassandra, ее операция внесения данных не имеет ничего общего с семантическим поведением в Cassandra.

Выражение SELECT в Cassandra похоже на аналогичное в SQL.

В MongoDB основным методом создания запросов является метод `db.collection.find()`.

#### Редактирование данных
В Cassandra есть выражение UPDATE, аналогичное SQL. UPDATE имеет ту же семантику UPSERT, подобно INSERT.

В MongoDB операция `update()` может полностью обновить существующий документ или обновить только определенные поля.

#### Удаление данных
Выражение DELETE в Cassandra аналогично SQL.

В MongoDB есть следующие операции для удаления документов: `deleteOne()`, `deleteMany()` и `remove()`.

#### Удаление таблицы (коллекции)
Выражение DROP TABLE в Cassandra аналогично SQL.

В MongoDB для удаления коллекции используется операция `drop()`.